moveset complet, mecanism de Active Abilities personalizate È™i cardul â€Replay Recommendationâ€, direct Ã®n structura proiectului tÄƒu actual.

PoÈ›i sÄƒ tratezi fiÈ™ierele de mai jos ca versiuni finale (overwrite la ce am schiÈ›at Ã®nainte).

1) config/omniAbilConfig.ts â€“ 8 abilitÄƒÈ›i Ã— 4 moves (32 miÈ™cÄƒri)
// FILE: config/omniAbilConfig.ts
import type { OmniKunoModuleId } from "@/config/omniKunoModules";

export type LocalizedString = {
  ro: string;
  en: string;
};

export type OmniAbilId =
  | "clarity_focus"
  | "energy"
  | "emotional_balance"
  | "sleep_recovery"
  | "willpower_perseverance"
  | "optimal_weight_management"
  | "relationships"
  | "trading_psychology";

export type OmniAbilMoveSlot =
  | "daily_ritual"
  | "micro_reset"
  | "skill_booster"
  | "emergency";

export type OmniAbilDefinition = {
  id: OmniAbilId;
  icon: string;
  title: LocalizedString;
  oneLiner: LocalizedString;
  moduleId?: OmniKunoModuleId;
  arcId?: string; // id din OMNI_ARCS (ex.: "claritate-energie")
};

export type OmniAbilMoveDefinition = {
  id: string;
  abilityId: OmniAbilId;
  slot: OmniAbilMoveSlot;
  title: LocalizedString;
  description: LocalizedString;
  xpReward: number;
  durationSeconds?: number;
};

/**
 * AbilitÄƒÈ›i de top â€“ mapate pe modulele OmniKuno existente
 */
export const OMNI_ABILITIES: OmniAbilDefinition[] = [
  {
    id: "clarity_focus",
    icon: "ğŸ¯",
    title: {
      ro: "Claritate & Focus",
      en: "Clarity & Focus",
    },
    oneLiner: {
      ro: "ÃÈ›i antrenezi atenÈ›ia Ã®n sprinturi scurte È™i reduci zgomotul mental.",
      en: "Train your attention in short sprints and reduce mental noise.",
    },
    moduleId: "focus_clarity" as OmniKunoModuleId,
    arcId: "claritate-energie",
  },
  {
    id: "energy",
    icon: "âš¡",
    title: {
      ro: "Energie stabilÄƒ",
      en: "Stable energy",
    },
    oneLiner: {
      ro: "ÃÈ›i calibrezi energia zilnicÄƒ fÄƒrÄƒ sÄƒ te epuizezi.",
      en: "Calibrate daily energy without burning out.",
    },
    moduleId: "energy_body" as OmniKunoModuleId,
    arcId: "claritate-energie",
  },
  {
    id: "emotional_balance",
    icon: "ğŸŒŠ",
    title: {
      ro: "Echilibru emoÈ›ional",
      en: "Emotional balance",
    },
    oneLiner: {
      ro: "ÃÈ›i reglezi reacÈ›iile È™i reduci inerÈ›ia emoÈ›ionalÄƒ.",
      en: "Regulate reactions and reduce emotional inertia.",
    },
    moduleId: "emotional_balance" as OmniKunoModuleId,
    arcId: "claritate-energie",
  },
  {
    id: "sleep_recovery",
    icon: "ğŸŒ™",
    title: {
      ro: "Somn & Recuperare",
      en: "Sleep & recovery",
    },
    oneLiner: {
      ro: "FoloseÈ™ti somnul ca multiplicator de progres, nu ca reset haotic.",
      en: "Use sleep as a progress multiplier, not a random shutdown.",
    },
    // Somnul este integrat Ã®n energy_body Ã®n Kuno
    moduleId: "energy_body" as OmniKunoModuleId,
    arcId: "claritate-energie",
  },
  {
    id: "willpower_perseverance",
    icon: "ğŸ›¡ï¸",
    title: {
      ro: "VoinÈ›Äƒ & PerseverenÈ›Äƒ",
      en: "Willpower & perseverance",
    },
    oneLiner: {
      ro: "ConstruieÈ™ti disciplinÄƒ calmÄƒ prin paÈ™i mici, repetabili.",
      en: "Build calm discipline through small, repeatable steps.",
    },
    moduleId: "willpower_perseverance" as OmniKunoModuleId,
    arcId: "claritate-energie",
  },
  {
    id: "optimal_weight_management",
    icon: "ğŸ¥—",
    title: {
      ro: "Greutate optimÄƒ",
      en: "Optimal weight",
    },
    oneLiner: {
      ro: "Reglezi alimentaÈ›ia È™i relaÈ›ia cu mÃ¢ncarea fÄƒrÄƒ extreme.",
      en: "Adjust nutrition and your relationship with food without extremes.",
    },
    moduleId: "optimal_weight_management" as OmniKunoModuleId,
    arcId: "claritate-energie",
  },
  {
    id: "relationships",
    icon: "ğŸ¤",
    title: {
      ro: "RelaÈ›ii & Conectare",
      en: "Relationships & connection",
    },
    oneLiner: {
      ro: "ConstruieÈ™ti interacÈ›iuni mai calme, mai clare, mai oneste.",
      en: "Build calmer, clearer, more honest interactions.",
    },
    moduleId: "relationships_communication" as OmniKunoModuleId,
    arcId: "claritate-energie",
  },
  {
    id: "trading_psychology",
    icon: "ğŸ“ˆ",
    title: {
      ro: "Psihologia Trading-ului",
      en: "Trading psychology",
    },
    oneLiner: {
      ro: "ÃÈ›i antrenezi comportamentul Ã®n piaÈ›Äƒ, nu doar strategiile.",
      en: "Train your behavior in the market, not just strategies.",
    },
    // PoÈ›i crea ulterior un modul dedicat Kuno; pentru moment, Ã®l poÈ›i mapa la focus/decizii
    moduleId: "decision_discernment" as OmniKunoModuleId,
    arcId: "claritate-energie",
  },
];

/**
 * Moveset complet â€“ 8 abilitÄƒÈ›i Ã— 4 miÈ™cÄƒri
 * Toate miÈ™cÄƒrile sunt gÃ¢ndite Ã®n interval 90 sec â€“ 10 min, fÄƒrÄƒ extreme.
 */
export const OMNI_ABIL_MOVES: OmniAbilMoveDefinition[] = [
  // 1) CLARITY & FOCUS
  {
    id: "clarity_focus_daily_ritual",
    abilityId: "clarity_focus",
    slot: "daily_ritual",
    title: {
      ro: "Sprint de focus (10 min)",
      en: "Focus sprint (10 min)",
    },
    description: {
      ro: "Alege un singur task important È™i lucreazÄƒ 10 minute fÄƒrÄƒ Ã®ntreruperi, cu notificÄƒrile oprite.",
      en: "Pick one important task and work for 10 minutes with all notifications off.",
    },
    xpReward: 15,
    durationSeconds: 600,
  },
  {
    id: "clarity_focus_micro_reset",
    abilityId: "clarity_focus",
    slot: "micro_reset",
    title: {
      ro: "Reset 90 secunde",
      en: "90-second reset",
    },
    description: {
      ro: "OpreÈ™te tot pentru 90 de secunde È™i urmÄƒreÈ™te doar respiraÈ›ia (4-4-6).",
      en: "Pause for 90 seconds and follow your breath (4-4-6).",
    },
    xpReward: 8,
    durationSeconds: 90,
  },
  {
    id: "clarity_focus_skill_booster",
    abilityId: "clarity_focus",
    slot: "skill_booster",
    title: {
      ro: "Checkpoint mental",
      en: "Mental checkpoint",
    },
    description: {
      ro: "Scrie: â€Ce fac acum?â€ È™i â€Care e urmÄƒtorul pas mic, clar?â€",
      en: "Write: â€œWhat am I doing now?â€ and â€œWhat is the next small clear step?â€",
    },
    xpReward: 10,
  },
  {
    id: "clarity_focus_emergency",
    abilityId: "clarity_focus",
    slot: "emergency",
    title: {
      ro: "Decuplare de zgomot",
      en: "Noise decoupling",
    },
    description: {
      ro: "CÃ¢nd eÈ™ti copleÈ™it, scoate telefonul fizic din camerÄƒ pentru 5 minute.",
      en: "When overwhelmed, physically move your phone out of the room for 5 minutes.",
    },
    xpReward: 12,
    durationSeconds: 300,
  },

  // 2) ENERGY
  {
    id: "energy_daily_ritual",
    abilityId: "energy",
    slot: "daily_ritual",
    title: {
      ro: "Plimbare de 12 minute",
      en: "12-minute walk",
    },
    description: {
      ro: "Plimbare scurtÄƒ, fÄƒrÄƒ telefon, la un pas uÈ™or alert.",
      en: "Short, phone-free walk at a comfortable brisk pace.",
    },
    xpReward: 15,
    durationSeconds: 720,
  },
  {
    id: "energy_micro_reset",
    abilityId: "energy",
    slot: "micro_reset",
    title: {
      ro: "RespiraÈ›ie de reactivare",
      en: "Reactivation breath",
    },
    description: {
      ro: "3 cicluri de inspiraÈ›ie profundÄƒ + expiraÈ›ie prelungitÄƒ.",
      en: "3 cycles of deep inhale + long exhale.",
    },
    xpReward: 6,
    durationSeconds: 45,
  },
  {
    id: "energy_skill_booster",
    abilityId: "energy",
    slot: "skill_booster",
    title: {
      ro: "Scan de energie (3Ã—/zi)",
      en: "Energy scan (3Ã—/day)",
    },
    description: {
      ro: "NoteazÄƒ de 3 ori pe zi energia pe o scarÄƒ 1â€“5 (dimineaÈ›Äƒ, prÃ¢nz, searÄƒ).",
      en: "Log your energy 3 times a day on a 1â€“5 scale (morning, noon, evening).",
    },
    xpReward: 10,
  },
  {
    id: "energy_emergency",
    abilityId: "energy",
    slot: "emergency",
    title: {
      ro: "Mini reset post-scroll",
      en: "Post-scroll mini reset",
    },
    description: {
      ro: "DupÄƒ un scroll lung, ridicÄƒ-te È™i fÄƒ 10 miÈ™cÄƒri simple (Ã®ntinderi / genuflexiuni).",
      en: "After long scrolling, stand up and do 10 simple movements (stretches / squats).",
    },
    xpReward: 12,
  },

  // 3) EMOTIONAL BALANCE
  {
    id: "emotional_balance_daily_ritual",
    abilityId: "emotional_balance",
    slot: "daily_ritual",
    title: {
      ro: "Jurnal de emoÈ›ii (3 rÃ¢nduri)",
      en: "3-line emotion journal",
    },
    description: {
      ro: "Scrie Ã®n fiecare zi 3 rÃ¢nduri: â€Ce simt?â€, â€Unde simt Ã®n corp?â€, â€Ce am nevoie acum?â€",
      en: "Write daily: â€œWhat do I feel?â€, â€œWhere in the body?â€, â€œWhat do I need now?â€",
    },
    xpReward: 15,
    durationSeconds: 240,
  },
  {
    id: "emotional_balance_micro_reset",
    abilityId: "emotional_balance",
    slot: "micro_reset",
    title: {
      ro: "Expir prelungit",
      en: "Long exhale",
    },
    description: {
      ro: "1 minut de inspiraÈ›ie normalÄƒ È™i expiraÈ›ie uÈ™or mai lungÄƒ (4â€“6 secunde).",
      en: "1 minute of normal inhale and slightly longer exhale (4â€“6 seconds).",
    },
    xpReward: 6,
    durationSeconds: 60,
  },
  {
    id: "emotional_balance_skill_booster",
    abilityId: "emotional_balance",
    slot: "skill_booster",
    title: {
      ro: "DenumeÈ™te emoÈ›ia",
      en: "Name the emotion",
    },
    description: {
      ro: "DupÄƒ o situaÈ›ie intensÄƒ, noteazÄƒ: â€Numele emoÈ›iei + intensitatea 1â€“10â€.",
      en: "After an intense moment, log: â€œemotion name + intensity 1â€“10â€.",
    },
    xpReward: 10,
  },
  {
    id: "emotional_balance_emergency",
    abilityId: "emotional_balance",
    slot: "emergency",
    title: {
      ro: "Ancorare 5â€“4â€“3â€“2â€“1",
      en: "5â€“4â€“3â€“2â€“1 grounding",
    },
    description: {
      ro: "Spune Ã®n gÃ¢nd: 5 lucruri pe care le vezi, 4 pe care le atingi, 3 pe care le auzi, 2 pe care le miroÈ™i, 1 pe care o guÈ™ti.",
      en: "Mentally list: 5 things you see, 4 you touch, 3 you hear, 2 you smell, 1 you taste.",
    },
    xpReward: 14,
    durationSeconds: 180,
  },

  // 4) SLEEP & RECOVERY
  {
    id: "sleep_recovery_daily_ritual",
    abilityId: "sleep_recovery",
    slot: "daily_ritual",
    title: {
      ro: "20 min fÄƒrÄƒ ecrane Ã®nainte de somn",
      en: "20 min screen-free before sleep",
    },
    description: {
      ro: "Alege o singurÄƒ searÄƒ È™i Ã®nlocuieÈ™te ultimile 20 de minute de ecran cu ceva liniÈ™tit (citit, Ã®ntinderi, jurnal).",
      en: "Pick one evening and replace the last 20 screen minutes with calm activity (reading, stretching, journaling).",
    },
    xpReward: 18,
    durationSeconds: 1200,
  },
  {
    id: "sleep_recovery_micro_reset",
    abilityId: "sleep_recovery",
    slot: "micro_reset",
    title: {
      ro: "PauzÄƒ de ochi (2 min)",
      en: "Eye reset (2 min)",
    },
    description: {
      ro: "2 minute cu ochii Ã®nchiÈ™i sau privirea Ã®n depÄƒrtare, fÄƒrÄƒ ecran.",
      en: "2 minutes with eyes closed or gaze far away, no screen.",
    },
    xpReward: 6,
    durationSeconds: 120,
  },
  {
    id: "sleep_recovery_skill_booster",
    abilityId: "sleep_recovery",
    slot: "skill_booster",
    title: {
      ro: "PlanificÄƒ â€fereastra de somnâ€",
      en: "Plan your sleep window",
    },
    description: {
      ro: "Alege un interval aproximativ de somn (ex.: 23:30â€“07:00) È™i noteazÄƒ-l pentru seara respectivÄƒ.",
      en: "Pick an approximate sleep window (e.g. 23:30â€“07:00) and note it down for tonight.",
    },
    xpReward: 10,
  },
  {
    id: "sleep_recovery_emergency",
    abilityId: "sleep_recovery",
    slot: "emergency",
    title: {
      ro: "Reset cÃ¢nd mintea nu tace",
      en: "Overthinking reset",
    },
    description: {
      ro: "DacÄƒ nu poÈ›i adormi, scrie timp de 3 minute toate gÃ¢ndurile pe o foaie È™i pune foaia deoparte.",
      en: "If you canâ€™t sleep, write all thoughts on paper for 3 minutes and put the sheet away.",
    },
    xpReward: 14,
    durationSeconds: 180,
  },

  // 5) WILLPOWER & PERSEVERANCE
  {
    id: "willpower_perseverance_daily_ritual",
    abilityId: "willpower_perseverance",
    slot: "daily_ritual",
    title: {
      ro: "5 minute de â€task greu, dar micâ€",
      en: "5-minute hard-but-small task",
    },
    description: {
      ro: "Alege un mic task pe care tot Ã®l amÃ¢ni È™i lucreazÄƒ doar 5 minute pe ce e mai simplu de Ã®nceput.",
      en: "Pick a small task you keep postponing and work 5 minutes on the easiest entry point.",
    },
    xpReward: 18,
    durationSeconds: 300,
  },
  {
    id: "willpower_perseverance_micro_reset",
    abilityId: "willpower_perseverance",
    slot: "micro_reset",
    title: {
      ro: "Valul de impuls (90 sec)",
      en: "Urge wave (90 sec)",
    },
    description: {
      ro: "CÃ¢nd vrei sÄƒ abandonezi sau sÄƒ cedezi unui impuls, amÃ¢nÄƒ 90 secunde È™i observÄƒ cum scade intensitatea.",
      en: "When you want to quit or act on an impulse, delay 90 seconds and watch the urge shift.",
    },
    xpReward: 8,
    durationSeconds: 90,
  },
  {
    id: "willpower_perseverance_skill_booster",
    abilityId: "willpower_perseverance",
    slot: "skill_booster",
    title: {
      ro: "Promisiune foarte micÄƒ",
      en: "Tiny promise",
    },
    description: {
      ro: "Scrie o promisiune ridicol de micÄƒ pentru azi (ex.: â€deschid documentulâ€) È™i respect-o.",
      en: "Write a ridiculously small promise for today (e.g. â€œopen the documentâ€) and keep it.",
    },
    xpReward: 12,
  },
  {
    id: "willpower_perseverance_emergency",
    abilityId: "willpower_perseverance",
    slot: "emergency",
    title: {
      ro: "Buton de pauzÄƒ (5 min)",
      en: "5-minute pause button",
    },
    description: {
      ro: "Ãnainte sÄƒ abandonezi complet, ia 5 minute pauzÄƒ È™i decide abia dupÄƒ aceea dacÄƒ laÈ™i totul baltÄƒ.",
      en: "Before you fully quit, take a 5-minute pause, then decide if you still want to drop it.",
    },
    xpReward: 14,
    durationSeconds: 300,
  },

  // 6) OPTIMAL WEIGHT MANAGEMENT
  {
    id: "optimal_weight_management_daily_ritual",
    abilityId: "optimal_weight_management",
    slot: "daily_ritual",
    title: {
      ro: "O masÄƒ conÈ™tientÄƒ",
      en: "One mindful meal",
    },
    description: {
      ro: "Alege o masÄƒ pe zi fÄƒrÄƒ ecrane, mÄƒnÃ¢ncÄƒ mai Ã®ncet È™i observÄƒ gustul, mirosul, textura.",
      en: "Pick one daily meal with no screens, eat slower and notice taste, smell, texture.",
    },
    xpReward: 18,
    durationSeconds: 900,
  },
  {
    id: "optimal_weight_management_micro_reset",
    abilityId: "optimal_weight_management",
    slot: "micro_reset",
    title: {
      ro: "PauzÄƒ de 60 sec Ã®nainte de gustare",
      en: "60-second pause before snack",
    },
    description: {
      ro: "Ãnainte de o gustare impulsivÄƒ, opreÈ™te-te 60 de secunde È™i bea un pahar cu apÄƒ.",
      en: "Before an impulsive snack, pause for 60 seconds and drink a glass of water.",
    },
    xpReward: 8,
    durationSeconds: 60,
  },
  {
    id: "optimal_weight_management_skill_booster",
    abilityId: "optimal_weight_management",
    slot: "skill_booster",
    title: {
      ro: "O singurÄƒ schimbare micÄƒ",
      en: "One small swap",
    },
    description: {
      ro: "Alege un singur schimb mic pentru azi (ex.: o bÄƒuturÄƒ fÄƒrÄƒ zahÄƒr Ã®n loc de una cu zahÄƒr).",
      en: "Pick one tiny swap for today (e.g. no-sugar drink instead of a sugary one).",
    },
    xpReward: 12,
  },
  {
    id: "optimal_weight_management_emergency",
    abilityId: "optimal_weight_management",
    slot: "emergency",
    title: {
      ro: "Reset fÄƒrÄƒ vinovÄƒÈ›ie",
      en: "No-guilt reset",
    },
    description: {
      ro: "DacÄƒ ai mÃ¢ncat mai mult decÃ¢t ai vrut, fÄƒ 5â€“10 minute de mers sau Ã®ntinderi, fÄƒrÄƒ monolog de vinovÄƒÈ›ie.",
      en: "If you overeat, do 5â€“10 minutes of walking or stretching without guilt monologue.",
    },
    xpReward: 14,
    durationSeconds: 420,
  },

  // 7) RELATIONSHIPS & CONNECTION
  {
    id: "relationships_daily_ritual",
    abilityId: "relationships",
    slot: "daily_ritual",
    title: {
      ro: "Mesaj de apreciere",
      en: "Appreciation message",
    },
    description: {
      ro: "Trimite un mesaj scurt de apreciere autenticÄƒ cuiva (nu trebuie sÄƒ fie profund, doar sincer).",
      en: "Send a short, genuine message of appreciation to someone (simple and honest).",
    },
    xpReward: 15,
    durationSeconds: 180,
  },
  {
    id: "relationships_micro_reset",
    abilityId: "relationships",
    slot: "micro_reset",
    title: {
      ro: "3 respiraÈ›ii Ã®nainte de rÄƒspuns",
      en: "3 breaths before reply",
    },
    description: {
      ro: "Ãntr-o conversaÈ›ie tensionatÄƒ, inspirÄƒ È™i expirÄƒ de 3 ori calm Ã®nainte sÄƒ rÄƒspunzi.",
      en: "In a tense conversation, take 3 calm breaths before replying.",
    },
    xpReward: 8,
    durationSeconds: 45,
  },
  {
    id: "relationships_skill_booster",
    abilityId: "relationships",
    slot: "skill_booster",
    title: {
      ro: "Ascultare reflectivÄƒ (o frazÄƒ)",
      en: "Reflective listening (one line)",
    },
    description: {
      ro: "Ãntr-o discuÈ›ie importantÄƒ, reformuleazÄƒ Ã®ntr-o frazÄƒ ce ai Ã®nÈ›eles: â€Ce aud este cÄƒ...â€",
      en: "In an important talk, reflect in one line what you heard: â€œWhat Iâ€™m hearing isâ€¦â€",
    },
    xpReward: 12,
  },
  {
    id: "relationships_emergency",
    abilityId: "relationships",
    slot: "emergency",
    title: {
      ro: "PauzÄƒ de de-escaladare",
      en: "De-escalation pause",
    },
    description: {
      ro: "CÃ¢nd simÈ›i cÄƒ urmeazÄƒ sÄƒ izbucneÈ™ti, spune: â€Am nevoie de 5 minute pauzÄƒ, revinâ€ È™i ieÈ™i din camerÄƒ.",
      en: "When youâ€™re about to blow up, say: â€œI need a 5-minute break, Iâ€™ll come back,â€ and step away.",
    },
    xpReward: 14,
    durationSeconds: 300,
  },

  // 8) TRADING PSYCHOLOGY
  {
    id: "trading_psychology_daily_ritual",
    abilityId: "trading_psychology",
    slot: "daily_ritual",
    title: {
      ro: "Plan 3-linii pre-market",
      en: "3-line pre-market plan",
    },
    description: {
      ro: "Ãnainte de sesiune, noteazÄƒ: contextul pieÈ›ei, scenariul principal È™i riscul maxim pe zi.",
      en: "Before the session, write: market context, main scenario, and max risk for the day.",
    },
    xpReward: 18,
    durationSeconds: 300,
  },
  {
    id: "trading_psychology_micro_reset",
    abilityId: "trading_psychology",
    slot: "micro_reset",
    title: {
      ro: "10 respiraÈ›ii Ã®nainte de buton",
      en: "10 breaths before button",
    },
    description: {
      ro: "Ãnainte de un buton important (Buy/Sell), ia 10 respiraÈ›ii calme È™i reciteÈ™te planul.",
      en: "Before a big Buy/Sell button, take 10 calm breaths and re-read your plan.",
    },
    xpReward: 8,
    durationSeconds: 120,
  },
  {
    id: "trading_psychology_skill_booster",
    abilityId: "trading_psychology",
    slot: "skill_booster",
    title: {
      ro: "Review de 2 minute pentru o tranzacÈ›ie",
      en: "2-minute trade review",
    },
    description: {
      ro: "Alege o singurÄƒ tranzacÈ›ie È™i noteazÄƒ: â€Ce am fÄƒcut bine?â€, â€Ce a fost impuls?â€, â€Ce ajustez mÃ¢ine?â€.",
      en: "Pick one trade and write: â€œWhat did I do well?â€, â€œWhat was impulsive?â€, â€œWhat will I adjust tomorrow?â€.",
    },
    xpReward: 12,
    durationSeconds: 120,
  },
  {
    id: "trading_psychology_emergency",
    abilityId: "trading_psychology",
    slot: "emergency",
    title: {
      ro: "Circuit breaker personal",
      en: "Personal circuit breaker",
    },
    description: {
      ro: "DupÄƒ 2 tranzacÈ›ii consecutive fÄƒcute impulsiv, opreÈ™te trading-ul pentru minimum 15 minute È™i ieÈ™i din faÈ›a ecranului.",
      en: "After 2 back-to-back impulsive trades, stop trading for at least 15 minutes and leave the screen.",
    },
    xpReward: 20,
    durationSeconds: 900,
  },
];

export function getMovesForAbility(abilityId: OmniAbilId): OmniAbilMoveDefinition[] {
  return OMNI_ABIL_MOVES.filter((move) => move.abilityId === abilityId);
}

export function getAbilityById(id: OmniAbilId): OmniAbilDefinition | undefined {
  return OMNI_ABILITIES.find((a) => a.id === id);
}

2) lib/omniAbilEngine.ts â€“ Active Abilities personalizate

Am pÄƒstrat funcÈ›ia existentÄƒ È™i am adÄƒugat un mecanism simplu de personalizare pe baza categoriei misiunii active (Profile.activeMission.category).
FoloseÈ™te heuristici, deci nu rupe nimic dacÄƒ nu existÄƒ categorie.

// FILE: lib/omniAbilEngine.ts
import {
  OMNI_ABILITIES,
  getMovesForAbility,
  type OmniAbilId,
  type OmniAbilDefinition,
  type OmniAbilMoveDefinition,
} from "@/config/omniAbilConfig";

export type UserAbilityConfig = {
  activeAbilityIds: OmniAbilId[];
};

export type OmniAbilAbilityWithMoves = {
  ability: OmniAbilDefinition;
  moves: OmniAbilMoveDefinition[];
};

/**
 * Context simplu pentru selecÈ›ia abilitÄƒÈ›ilor active.
 * Ãn v1 folosim categoria misiunii active (energie, relatii, claritate, etc.).
 */
export type AbilitySelectionContext = {
  missionCategory?: string | null;
};

export function getDefaultUserAbilityConfig(): UserAbilityConfig {
  return {
    activeAbilityIds: OMNI_ABILITIES.map((a) => a.id),
  };
}

/**
 * Heuristici simple: mapeazÄƒ categoria misiunii (string) la abilitÄƒÈ›i dominante.
 * FuncÈ›ioneazÄƒ cu etichetele actuale (energie, somn, relatii, claritate, greutate, trading etc.).
 */
export function deriveUserAbilityConfigFromContext(ctx?: AbilitySelectionContext): UserAbilityConfig {
  const raw = (ctx?.missionCategory ?? "").toLowerCase().trim();

  if (!raw) {
    return getDefaultUserAbilityConfig();
  }

  const ids: OmniAbilId[] = [];

  const add = (id: OmniAbilId) => {
    if (!ids.includes(id)) ids.push(id);
  };

  if (raw.includes("energie") || raw.includes("energy") || raw.includes("somn") || raw.includes("sleep")) {
    add("energy");
    add("sleep_recovery");
  }

  if (raw.includes("claritate") || raw.includes("focus") || raw.includes("decizie") || raw.includes("decision")) {
    add("clarity_focus");
  }

  if (raw.includes("emotii") || raw.includes("emoÈ›ii") || raw.includes("calm") || raw.includes("stress") || raw.includes("stres")) {
    add("emotional_balance");
  }

  if (raw.includes("greutate") || raw.includes("weight") || raw.includes("alimentatie") || raw.includes("nutrition")) {
    add("optimal_weight_management");
    add("energy");
  }

  if (raw.includes("relatii") || raw.includes("relaÈ›ii") || raw.includes("relationship") || raw.includes("communication")) {
    add("relationships");
    add("emotional_balance");
  }

  if (raw.includes("voinÈ›Äƒ") || raw.includes("willpower") || raw.includes("disciplina") || raw.includes("discipline")) {
    add("willpower_perseverance");
  }

  if (raw.includes("trading") || raw.includes("market") || raw.includes("piata")) {
    add("trading_psychology");
    add("clarity_focus");
    add("emotional_balance");
  }

  if (ids.length === 0) {
    return getDefaultUserAbilityConfig();
  }

  return { activeAbilityIds: ids };
}

/**
 * Varianta genericÄƒ (backwards compatible) â€“ folositÄƒ Ã®n alte pÄƒrÈ›i ale codului.
 */
export function getUserAbilitiesWithMoves(config?: UserAbilityConfig): OmniAbilAbilityWithMoves[] {
  const effectiveConfig = config ?? getDefaultUserAbilityConfig();
  return effectiveConfig.activeAbilityIds
    .map((id) => {
      const ability = OMNI_ABILITIES.find((a) => a.id === id);
      if (!ability) return null;
      const moves = getMovesForAbility(id);
      return { ability, moves };
    })
    .filter((entry): entry is OmniAbilAbilityWithMoves => Boolean(entry));
}

/**
 * Varianta personalizatÄƒ: porneÈ™te de la context (ex.: misiunea activÄƒ) È™i derivÄƒ abilitatea.
 * Pagina OmniAbil va folosi asta.
 */
export function getUserAbilitiesWithMovesFromContext(
  ctx?: AbilitySelectionContext,
): OmniAbilAbilityWithMoves[] {
  const config = deriveUserAbilityConfigFromContext(ctx);
  return getUserAbilitiesWithMoves(config);
}

3) components/omniAbil/OmniAbilReplayCard.tsx â€“ Replay Recommendation

Card care foloseÈ™te useProfile + useProgressFacts È™i se uitÄƒ Ã®n facts.omni.abil
(dailyCompletedThisWeek, weeklyCompletedThisMonth, lastCompletedDate) pentru a da un mesaj clar: ce meritÄƒ repetat.

// FILE: components/omniAbil/OmniAbilReplayCard.tsx
"use client";

import { useMemo } from "react";
import type { ProgressFact } from "@/lib/progressFacts";
import { useProfile } from "@/components/ProfileProvider";
import { useProgressFacts } from "@/components/useProgressFacts";

type OmniAbilReplayCardProps = {
  lang: "ro" | "en";
};

function computeReplayCopy(lang: "ro" | "en", facts: ProgressFact | null | undefined) {
  const abil = facts?.omni?.abil;
  if (!abil) {
    return {
      headline:
        lang === "ro" ? "Ce meritÄƒ repetat" : "What is worth replaying",
      body:
        lang === "ro"
          ? "DupÄƒ ce marchezi cÃ¢teva misiuni OmniAbil ca fÄƒcute, aici vei primi sugestii simple despre ce meritÄƒ repetat pentru stabilitate."
          : "Once you complete a few OmniAbil missions, youâ€™ll see simple suggestions here about whatâ€™s worth replaying for stability.",
      hint: null as string | null,
    };
  }

  const daily = abil.dailyCompletedThisWeek ?? 0;
  const weekly = abil.weeklyCompletedThisMonth ?? 0;
  const lastDate = abil.lastCompletedDate;
  let daysSince = NaN;

  if (typeof lastDate === "string" && /^\d{4}-\d{2}-\d{2}$/.test(lastDate)) {
    const [y, m, d] = lastDate.split("-").map((x) => Number(x));
    const last = new Date(Date.UTC(y, m - 1, d));
    const now = new Date();
    const todayUtc = new Date(Date.UTC(now.getFullYear(), now.getMonth(), now.getDate()));
    const diffMs = todayUtc.getTime() - last.getTime();
    daysSince = Math.round(diffMs / (1000 * 60 * 60 * 24));
  }

  const headline = lang === "ro" ? "Ce meritÄƒ repetat sÄƒptÄƒmÃ¢na asta" : "What to replay this week";

  // Mesaje Ã®n funcÈ›ie de distanÈ›a faÈ›Äƒ de ultima completare
  if (!Number.isFinite(daysSince)) {
    return {
      headline,
      body:
        lang === "ro"
          ? "Ai Ã®nceput sÄƒ lucrezi cu OmniAbil. ÃncearcÄƒ sÄƒ repeÈ›i misiunea zilnicÄƒ de 2â€“3 ori pe sÄƒptÄƒmÃ¢nÄƒ. DupÄƒ cÃ¢teva zile, aici vei vedea un ghid mai precis."
          : "Youâ€™ve started using OmniAbil. Try to repeat the daily mission 2â€“3 times per week. After a few days, youâ€™ll see more precise guidance here.",
      hint:
        lang === "ro"
          ? `PÃ¢nÄƒ acum: ${daily} misiuni zilnice Ã®n aceastÄƒ sÄƒptÄƒmÃ¢nÄƒ, ${weekly} sÄƒptÄƒmÃ¢nale Ã®n aceastÄƒ lunÄƒ.`
          : `So far: ${daily} daily missions this week, ${weekly} weekly missions this month.`,
    };
  }

  if (daysSince <= 1) {
    if (daily >= 3) {
      return {
        headline,
        body:
          lang === "ro"
            ? "EÈ™ti deja pe un pattern bun. ContinuÄƒ cu aceeaÈ™i misiune zilnicÄƒ sau o variantÄƒ foarte apropiatÄƒ, fÄƒrÄƒ sÄƒ creÈ™ti durata. Stabilitatea conteazÄƒ mai mult decÃ¢t complexitatea."
            : "Youâ€™re already on a solid pattern. Repeat the same daily mission or a very similar version without increasing duration. Stability matters more than complexity.",
        hint:
          lang === "ro"
            ? `Ãn aceastÄƒ sÄƒptÄƒmÃ¢nÄƒ ai marcat ${daily} misiuni zilnice È™i ${weekly} sÄƒptÄƒmÃ¢nale.`
            : `This week youâ€™ve completed ${daily} daily and ${weekly} weekly missions.`,
      };
    }
    return {
      headline,
      body:
        lang === "ro"
          ? "Ai misiuni recente marcate ca fÄƒcute. RepetÄƒ azi o versiune simplÄƒ a aceleiaÈ™i misiuni â€“ chiar dacÄƒ doar 5â€“10 minute. RepetiÈ›ia creeazÄƒ siguranÈ›Äƒ È™i automatism."
          : "Youâ€™ve completed missions recently. Replay a simple version of the same mission today â€“ even just 5â€“10 minutes. Repetition builds safety and automaticity.",
      hint:
        lang === "ro"
          ? `Èšinta realistÄƒ: 3 misiuni zilnice pe sÄƒptÄƒmÃ¢nÄƒ È™i 1â€“2 misiuni sÄƒptÄƒmÃ¢nale pe lunÄƒ.`
          : `Realistic target: 3 daily missions per week and 1â€“2 weekly missions per month.`,
    };
  }

  if (daysSince <= 4) {
    return {
      headline,
      body:
        lang === "ro"
          ? `Au trecut ${daysSince} zile de cÃ¢nd ai fÄƒcut ultima misiune OmniAbil. Reia azi cea mai simplÄƒ versiune a misiunii zilnice (maxim 10 minute) È™i marcheaz-o ca fÄƒcutÄƒ. Nu trebuie sÄƒ â€recupereziâ€.`
          : `${daysSince} days have passed since your last OmniAbil mission. Today, replay the simplest version of your daily mission (max 10 minutes) and mark it done. You donâ€™t need to â€œcatch upâ€.`,
      hint:
        lang === "ro"
          ? `Te poÈ›i concentra doar pe azi. Restul sÄƒptÄƒmÃ¢nii poate rÄƒmÃ¢ne simplÄƒ: Ã®ncÄƒ 1â€“2 misiuni mici, nu mai mult.`
          : `Focus on today only. The rest of the week can stay light: 1â€“2 more small missions, nothing more.`,
    };
  }

  // > 4 zile
  return {
    headline,
    body:
      lang === "ro"
        ? `Nu ai mai marcat o misiune OmniAbil de ${daysSince} zile. Nu este un eÈ™ec, ci un semnal. Alege azi cea mai micÄƒ formÄƒ posibilÄƒ de misiune (90 de secunde sau 5 minute), marcheaz-o È™i lasÄƒ asta sÄƒ fie noul tÄƒu punct de relansare.`
        : `It has been ${daysSince} days since your last OmniAbil mission. This is not a failure, itâ€™s a signal. Today, choose the smallest possible mission (90 seconds or 5 minutes), mark it done, and let that be your new restart point.`,
    hint:
      lang === "ro"
        ? `Èšinta nu este perfecÈ›iunea, ci sÄƒ apari din nou. O singurÄƒ misiune azi conteazÄƒ mai mult decÃ¢t 7 â€recuperateâ€ mÃ¢ine.`
        : `The goal isnâ€™t perfection, itâ€™s to show up again. One mission today matters more than 7 â€œrecoveredâ€ tomorrow.`,
  };
}

export function OmniAbilReplayCard({ lang }: OmniAbilReplayCardProps) {
  const { profile } = useProfile();
  const { data: facts, loading } = useProgressFacts(profile?.id ?? null);

  const normalizedLang: "ro" | "en" = lang === "en" ? "en" : "ro";
  const { headline, body, hint } = useMemo(
    () => computeReplayCopy(normalizedLang, facts),
    [normalizedLang, facts],
  );

  return (
    <section className="omni-card rounded-3xl bg-[var(--omni-surface-card)]/95 p-4 shadow-[0_12px_28px_rgba(0,0,0,0.06)] sm:p-5">
      <p className="text-[10px] font-semibold uppercase tracking-[0.3em] text-[var(--omni-muted)]">
        {normalizedLang === "ro" ? "Replay recomandat" : "Recommended replay"}
      </p>
      <h2 className="mt-2 text-[15px] font-semibold text-[var(--omni-ink)]">
        {headline}
      </h2>
      <p className="mt-2 text-[13px] leading-relaxed text-[var(--omni-ink-soft)]">
        {body}
      </p>
      {hint ? (
        <p className="mt-3 text-[11px] text-[var(--omni-muted)]">
          {hint}
        </p>
      ) : null}
      {loading ? (
        <p className="mt-3 text-[11px] text-[var(--omni-muted)]">
          {normalizedLang === "ro"
            ? "ActualizÄƒm datele tale de progres..."
            : "Updating your progress data..."}
        </p>
      ) : null}
    </section>
  );
}

4) Update components/omniAbil/OmniAbilPage.tsx â€“ personalize Active Abilities + include Replay Card

ÃnlocuieÈ™te versiunea anterioarÄƒ cu aceasta (singurele diferenÈ›e: import nou din omniAbilEngine, folosim profile.activeMission?.category È™i includem OmniAbilReplayCard).

// FILE: components/omniAbil/OmniAbilPage.tsx
"use client";

import { useState } from "react";
import { useRouter } from "next/navigation";
import SiteHeader from "@/components/SiteHeader";
import MenuOverlay from "@/components/MenuOverlay";
import { AppShell } from "@/components/AppShell";
import { useNavigationLinks } from "@/components/useNavigationLinks";
import { useProfile } from "@/components/ProfileProvider";
import { useI18n } from "@/components/I18nProvider";
import { OmniAbilCard } from "@/components/dashboard/OmniAbilCard";
import {
  getUserAbilitiesWithMovesFromContext,
  type OmniAbilAbilityWithMoves,
} from "@/lib/omniAbilEngine";
import { OmniAbilReplayCard } from "@/components/omniAbil/OmniAbilReplayCard";

function AbilityCard({ entry, lang }: { entry: OmniAbilAbilityWithMoves; lang: "ro" | "en" }) {
  const { ability, moves } = entry;
  const t = (value: { ro: string; en: string }) => (lang === "en" ? value.en : value.ro);

  return (
    <article className="flex h-full flex-col rounded-3xl border border-[var(--omni-border-soft)] bg-[var(--omni-surface-card)]/95 p-4 shadow-[0_10px_24px_rgba(0,0,0,0.06)]">
      <header className="mb-3 flex items-start justify-between gap-3">
        <div>
          <div className="text-2xl">{ability.icon}</div>
          <h3 className="mt-2 text-[15px] font-semibold text-[var(--omni-ink)]">
            {t(ability.title)}
          </h3>
          <p className="mt-1 text-[12px] leading-relaxed text-[var(--omni-muted)]">
            {t(ability.oneLiner)}
          </p>
        </div>
      </header>
      <div className="mt-3 flex flex-1 flex-col gap-2">
        {moves.slice(0, 4).map((move) => (
          <div
            key={move.id}
            className="rounded-2xl border border-[#E6D6C5] bg-[#FFF7EF] px-3 py-2"
          >
            <p className="text-[12px] font-semibold text-[var(--omni-ink)]">
              {t(move.title)}
            </p>
            <p className="mt-1 text-[11px] leading-snug text-[var(--omni-muted)]">
              {t(move.description)}
            </p>
            <p className="mt-1 text-[10px] uppercase tracking-[0.2em] text-[var(--omni-muted)]">
              {move.durationSeconds
                ? `~${Math.round(move.durationSeconds / 60)} min Â· +${move.xpReward} XP`
                : `+${move.xpReward} XP`}
            </p>
          </div>
        ))}
      </div>
    </article>
  );
}

export default function OmniAbilPage() {
  const router = useRouter();
  const navLinks = useNavigationLinks();
  const { profile } = useProfile();
  const { lang } = useI18n();
  const [menuOpen, setMenuOpen] = useState(false);

  const normalizedLang: "ro" | "en" = lang === "en" ? "en" : "ro";
  const missionCategory = profile?.activeMission?.category ?? null;
  const abilitiesWithMoves = getUserAbilitiesWithMovesFromContext({
    missionCategory,
  });

  const header = (
    <SiteHeader
      onMenuToggle={() => setMenuOpen(true)}
      onAuthRequest={() => router.push("/auth?returnTo=%2Fomni-abil")}
    />
  );

  const title =
    normalizedLang === "ro"
      ? "OmniAbil Â· Implementare practicÄƒ"
      : "OmniAbil Â· Practical implementation";

  const subtitle =
    normalizedLang === "ro"
      ? "Aici transformi ce ai Ã®nvÄƒÈ›at Ã®n acÈ›iuni scurte, repetate, care schimbÄƒ cum trÄƒieÈ™ti ziua."
      : "Here you turn what youâ€™ve learned into short, repeatable actions that change how you live your day.";

  return (
    <>
      <MenuOverlay
        open={menuOpen}
        onClose={() => setMenuOpen(false)}
        links={navLinks}
        profile={profile}
      />
      <AppShell header={header}>
        <section className="omni-card rounded-3xl bg-[var(--omni-surface-card)]/95 p-6 shadow-[0_16px_40px_rgba(0,0,0,0.06)] md:p-7">
          <p className="text-[10px] font-semibold uppercase tracking-[0.3em] text-[var(--omni-muted)]">
            {normalizedLang === "ro" ? "Nivelul 2 Â· AcÈ›iune" : "Level 2 Â· Action"}
          </p>
          <h1 className="mt-2 text-2xl font-semibold text-[var(--omni-ink)]">{title}</h1>
          <p className="mt-3 text-sm text-[var(--omni-ink-soft)] sm:text-base">
            {subtitle}
          </p>
          <p className="mt-2 text-[11px] text-[var(--omni-muted)] sm:text-[12px]">
            {normalizedLang === "ro"
              ? "Nu adÄƒugÄƒm zgomot, ci paÈ™i simpli. OmniKuno clarificÄƒ ce conteazÄƒ. OmniAbil te ajutÄƒ sÄƒ pui Ã®n practicÄƒ, fÄƒrÄƒ presiune, cu paÈ™i de 90 de secunde pÃ¢nÄƒ la 10 minute."
              : "We donâ€™t add noise, only simple steps. OmniKuno clarifies what matters. OmniAbil helps you apply it, without pressure, in 90-second to 10-minute steps."}
          </p>
        </section>

        <section className="mt-6 grid gap-6 lg:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)]">
          <div className="omni-card h-full rounded-3xl bg-[var(--omni-surface-card)]/95 p-4 shadow-[0_12px_28px_rgba(0,0,0,0.06)] sm:p-5">
            <p className="text-[10px] font-semibold uppercase tracking-[0.3em] text-[var(--omni-muted)]">
              {normalizedLang === "ro" ? "Misiunile tale de azi" : "Your missions for today"}
            </p>
            <p className="mt-1 text-[13px] text-[var(--omni-ink-soft)]">
              {normalizedLang === "ro"
                ? "Alege ce poÈ›i face realist azi. Bifezi, iar progresul tÄƒu se reflectÄƒ Ã®n timp, comparat doar cu tine."
                : "Choose what you can realistically do today. Check it off and see your progress over time, compared only to yourself."}
            </p>
            <div className="mt-4">
              <OmniAbilCard lang={normalizedLang} />
            </div>
          </div>

          <div className="omni-card h-full rounded-3xl bg-[var(--omni-surface-card)]/95 p-4 shadow-[0_12px_28px_rgba(0,0,0,0.06)] sm:p-5">
            <p className="text-[10px] font-semibold uppercase tracking-[0.3em] text-[var(--omni-muted)]">
              {normalizedLang === "ro" ? "Cum funcÈ›ioneazÄƒ OmniAbil" : "How OmniAbil works"}
            </p>
            <ul className="mt-3 space-y-2 text-[13px] leading-relaxed text-[var(--omni-ink-soft)]">
              <li>
                {normalizedLang === "ro"
                  ? "1. OmniKuno Ã®È›i oferÄƒ claritate È™i modele mentale."
                  : "1. OmniKuno gives you clarity and mental models."}
              </li>
              <li>
                {normalizedLang === "ro"
                  ? "2. OmniAbil le traduce Ã®n misiuni zilnice È™i sÄƒptÄƒmÃ¢nale, Ã®n paÈ™i scurÈ›i È™i clari."
                  : "2. OmniAbil translates them into daily and weekly missions, in short clear steps."}
              </li>
              <li>
                {normalizedLang === "ro"
                  ? "3. Pe mÄƒsurÄƒ ce aplici, XP-ul È™i mastery-ul tÄƒu cresc È™i moveset-ul devine mai fin."
                  : "3. As you apply, your XP and mastery grow and your moveset becomes more refined."}
              </li>
            </ul>
          </div>
        </section>

        <section className="mt-8">
          <div className="mb-3 flex flex-wrap items-baseline justify-between gap-3">
            <div>
              <p className="text-[10px] font-semibold uppercase tracking-[0.3em] text-[var(--omni-muted)]">
                {normalizedLang === "ro"
                  ? "AbilitÄƒÈ›i active & moveset"
                  : "Active abilities & moveset"}
              </p>
              <p className="mt-1 text-[13px] text-[var(--omni-ink-soft)]">
                {normalizedLang === "ro"
                  ? "Fiecare abilitate are 4 miÈ™cÄƒri de bazÄƒ: ritual zilnic, micro reset, booster È™i emergency move."
                  : "Each ability has 4 basic moves: daily ritual, micro reset, booster, and emergency move."}
              </p>
              {missionCategory ? (
                <p className="mt-1 text-[11px] text-[var(--omni-muted)]">
                  {normalizedLang === "ro"
                    ? `PrioritizÄƒm abilitÄƒÈ›i relevante pentru misiunea ta actualÄƒ (â€${missionCategory}â€).`
                    : `We prioritise abilities relevant to your current mission (â€œ${missionCategory}â€).`}
                </p>
              ) : null}
            </div>
          </div>

          <div className="grid gap-4 sm:grid-cols-2 xl:grid-cols-3">
            {abilitiesWithMoves.map((entry) => (
              <AbilityCard key={entry.ability.id} entry={entry} lang={normalizedLang} />
            ))}
          </div>
        </section>

        <section className="mt-8">
          <OmniAbilReplayCard lang={normalizedLang} />
        </section>
      </AppShell>
    </>
  );
}

5) Route rÄƒmÃ¢ne la fel

app/(app)/omni-abil/page.tsx poate rÄƒmÃ¢ne exact cum È›i l-am dat Ã®nainte; nu trebuie modificat pentru aceste trei upgrade-uri.